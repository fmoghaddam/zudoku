import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import * as Tabs from "@radix-ui/react-tabs";
import { useState } from "react";
import { Badge } from "zudoku/ui/Badge.js";
import { NativeSelect, NativeSelectOption } from "zudoku/ui/NativeSelect.js";
import { cn } from "zudoku/ui/util.js";
import { Markdown } from "../../../components/Markdown.js";
import { SchemaView } from "../schema/SchemaView.js";
export const ResponseContent = ({ responses, selectedResponse, onSelectResponse, }) => {
    const [selectedMediaType, setSelectedMediaType] = useState(responses[0]?.content?.[0]?.mediaType ?? "");
    const currentResponse = responses.find((r) => r.statusCode === selectedResponse) ?? responses[0];
    const hideTabs = responses.length === 1 && responses.at(0)?.statusCode === "200";
    const cardHeader = (_jsxs("div", { className: "flex flex-col text-muted-foreground", children: [_jsxs("div", { className: cn("flex flex-row items-center gap-2 justify-between", !hideTabs && "px-4 py-1.5 border-b"), children: [!hideTabs && (_jsx(Tabs.List, { className: "flex flex-row font-medium text-sm gap-4", children: responses.map((response) => (_jsx(Tabs.Trigger, { value: response.statusCode, className: cn("py-0.5 h-fit -mx-2 px-2 rounded-md", "data-[state=active]:dark:ring-1 data-[state=active]:dark:ring-border data-[state=active]:bg-background data-[state=active]:drop-shadow", "data-[state=active]:font-semibold data-[state=active]:text-foreground"), children: response.statusCode }, response.statusCode))) })), currentResponse?.content && currentResponse.content.length > 1 && (_jsx(NativeSelect, { value: selectedMediaType, onChange: (e) => setSelectedMediaType(e.target.value), className: "text-xs h-fit py-1 bg-background", children: currentResponse.content.map((c) => (_jsx(NativeSelectOption, { value: c.mediaType, children: c.mediaType }, c.mediaType))) }))] }), _jsxs("div", { className: "p-2 clear-both", children: [hideTabs && (_jsx(Badge, { variant: "outline", className: "float-start me-2", children: currentResponse?.statusCode })), currentResponse?.description && (_jsx(Markdown, { className: "text-sm text-muted-foreground max-w-none", content: currentResponse.description }))] })] }));
    return (_jsx("div", { className: "flex flex-col gap-2", children: _jsx(Tabs.Root, { value: selectedResponse, onValueChange: (value) => {
                onSelectResponse?.(value);
                const newResponse = responses.find((r) => r.statusCode === value);
                setSelectedMediaType(newResponse?.content?.[0]?.mediaType ?? "");
            }, children: responses.map((response) => (_jsx(Tabs.Content, { value: response.statusCode, children: _jsx(SchemaView, { schema: response.content?.find((content) => content.mediaType === selectedMediaType)?.schema, cardHeader: cardHeader }) }, response.statusCode))) }) }));
};
//# sourceMappingURL=ResponseContent.js.map