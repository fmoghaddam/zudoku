import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { ErrorBoundary } from "react-error-boundary";
import { Button } from "zudoku/components";
import { useAuth } from "zudoku/hooks";
import { Item, ItemActions, ItemContent, ItemDescription, ItemTitle, } from "zudoku/ui/Item.js";
import { useVerifiedEmail } from "../../authentication/hook.js";
import { Slot } from "../../components/Slot.js";
import { ErrorMessage } from "../../errors/ErrorMessage.js";
import { CreateApiKeyDialog } from "./CreateApiKeyDialog.js";
import { ApiKeyList } from "./settings/ApiKeyList.js";
export const SettingsApiKeys = ({ service }) => {
    const [isCreateApiKeyOpen, setIsCreateApiKeyOpen] = useState(false);
    const auth = useAuth();
    const { supportsEmailVerification, requestEmailVerification, refresh } = useVerifiedEmail();
    return (_jsxs("div", { className: "max-w-3xl h-full pt-(--padding-content-top) pb-(--padding-content-bottom)", children: [_jsx(Slot.Target, { name: "api-keys-list-page" }), _jsxs("div", { className: "flex justify-between pb-3", children: [_jsx("h1", { className: "font-medium text-2xl", children: "API Keys" }), service.createKey && (_jsx(CreateApiKeyDialog, { service: service, isOpen: isCreateApiKeyOpen, onOpenChange: setIsCreateApiKeyOpen }))] }), _jsx("p", { children: "Create, manage, and monitor your API keys" }), _jsx(Slot.Target, { name: "api-keys-list-page-before-keys" }), auth.profile?.emailVerified === false ? (_jsxs(Item, { variant: "outline", className: "mt-4", children: [_jsxs(ItemContent, { children: [_jsx(ItemTitle, { children: "Verified email required" }), _jsxs(ItemDescription, { children: ["You need to verify your email to access API keys.", _jsx(Button, { onClick: refresh, children: "Refresh" })] })] }), supportsEmailVerification && (_jsx(ItemActions, { children: _jsx(Button, { onClick: () => requestEmailVerification(), children: "Request verification" }) }))] })) : (_jsx(ErrorBoundary, { fallbackRender: ({ error }) => _jsx(ErrorMessage, { error: error }), children: _jsx(ApiKeyList, { service: service }) }))] }));
};
//# sourceMappingURL=SettingsApiKeys.js.map