import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { CheckIcon, CopyIcon } from "lucide-react";
import { useRef, useState } from "react";
import { cn } from "../util/cn.js";
import { Button } from "./Button.js";
export const EmbeddedCodeBlock = ({ children, fullHeight, language, showCopy = "hover", showCopyText, showLanguageIndicator = true, showLineNumbers, ...props }) => {
    const [isCopied, setIsCopied] = useState(false);
    const ref = useRef(null);
    if (!children)
        return null;
    return (_jsxs("div", { className: cn("code-block-wrapper relative group bg-muted/50", showLineNumbers && "line-numbers", fullHeight && "h-full"), children: [_jsx("div", { className: "relative overflow-auto", children: _jsx("div", { className: cn("code-block text-sm not-prose scrollbar [&>pre]:overflow-x-auto [&_code]:p-2", fullHeight && "h-full [&>pre]:h-full", props.className), ref: ref, children: children }) }), showLanguageIndicator && (_jsx("span", { className: cn("absolute top-1.5 end-3 text-[11px]! font-mono text-muted-foreground transition group-hover:opacity-0 pointer-events-none", showCopy === "always" && "hidden"), children: language })), showCopy !== "never" && (_jsxs(Button, { type: "button", variant: "outline", size: "icon-xs", className: cn("absolute top-2 end-2 p-2", showCopy === "hover" && "opacity-0 group-hover:opacity-100", showCopyText && "flex gap-2 items-center font-medium"), disabled: isCopied, onClick: () => {
                    if (!ref.current?.textContent)
                        return;
                    setIsCopied(true);
                    void navigator.clipboard.writeText(ref.current.textContent);
                    setTimeout(() => setIsCopied(false), 2000);
                }, children: [isCopied ? (_jsx(CheckIcon, { className: "shrink-0 text-emerald-600 dark:text-emerald-300", size: 13, strokeWidth: 2.5, absoluteStrokeWidth: true })) : (_jsx(CopyIcon, { className: "shrink-0", size: 13 })), showCopyText && "Copy"] }))] }));
};
//# sourceMappingURL=EmbeddedCodeBlock.js.map