{"version":3,"file":"SchemaView-Cm6nRtpo.js","sources":["../src/lib/components/PagefindSearchMeta.tsx","../src/lib/util/groupBy.ts","../src/lib/plugins/openapi/components/ConstValue.tsx","../src/lib/plugins/openapi/components/EnumValues.tsx","../src/lib/plugins/openapi/ParamInfos.tsx","../src/lib/plugins/openapi/schema/SchemaExampleAndDefault.tsx","../src/lib/plugins/openapi/schema/utils.ts","../src/lib/plugins/openapi/schema/SchemaPropertyItem.tsx","../src/lib/plugins/openapi/schema/union-helpers.ts","../src/lib/plugins/openapi/schema/UnionView.tsx","../src/lib/plugins/openapi/schema/SchemaView.tsx"],"sourcesContent":["import type { PropsWithChildren } from \"react\";\n\n/**\n * Adds metadata to be captured by Pagefind for search results.\n * Content is visually hidden but indexed by the search engine.\n */\nexport const PagefindSearchMeta = ({\n  name,\n  children,\n}: PropsWithChildren<{ name?: string }>) => (\n  <span data-pagefind-meta={name} className=\"sr-only\">\n    {children}\n  </span>\n);\n","// biome-ignore-all lint/suspicious/noExplicitAny: Allow any type\nexport const groupBy = <\n  T extends Record<PropertyKey, any>,\n  KeySelector extends (item: T) => PropertyKey,\n>(\n  arr: T[],\n  keySelector: KeySelector,\n): Partial<Record<ReturnType<KeySelector>, T[]>> => {\n  return arr.reduce(\n    (accumulator, val) => {\n      const groupedKey = keySelector(val) as ReturnType<KeySelector>;\n      if (!accumulator[groupedKey]) {\n        accumulator[groupedKey] = [];\n      }\n      accumulator[groupedKey].push(val);\n      return accumulator;\n    },\n    {} as Record<ReturnType<KeySelector>, T[]>,\n  );\n};\n","import type { SchemaObject } from \"../../../oas/parser/index.js\";\nimport { SelectOnClick } from \"./SelectOnClick.js\";\n\nexport const ConstValue = ({\n  schema,\n  hideDescription = false,\n}: {\n  schema: SchemaObject;\n  hideDescription?: boolean;\n}) => {\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <div>\n        <span className=\"text-muted-foreground\">Const value: </span>\n        <SelectOnClick className=\"border rounded px-1 font-mono\">\n          {schema.const}\n        </SelectOnClick>\n        {!hideDescription && schema.description && (\n          <div className=\"text-muted-foreground\">{schema.description}</div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { ChevronDownIcon, ChevronUpIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"zudoku/ui/Button.js\";\nimport { cn } from \"../../../util/cn.js\";\nimport { SelectOnClick } from \"./SelectOnClick.js\";\n\nexport const EnumValues = ({\n  values,\n  className,\n  maxVisibleValues = 8,\n}: {\n  values: Array<string | number>;\n  className?: string;\n  maxVisibleValues?: number;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  if (!values.length) return null;\n\n  const shouldCollapse = values.length > maxVisibleValues;\n  const visibleValues =\n    shouldCollapse && !isOpen ? values.slice(0, maxVisibleValues) : values;\n\n  return (\n    <div className={cn(\"flex flex-wrap gap-1.5\", className)}>\n      <span className=\"text-muted-foreground\">Enum values:</span>\n      {visibleValues.map((value) => (\n        <div key={value}>\n          <SelectOnClick className=\"border rounded-sm px-1 font-mono\">\n            {value}\n          </SelectOnClick>\n        </div>\n      ))}\n      {shouldCollapse && (\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"h-fit px-0\"\n          onClick={() => setIsOpen(!isOpen)}\n        >\n          {isOpen ? (\n            <div className=\"flex items-center gap-1\">\n              <ChevronUpIcon size={12} />\n              <span className=\"text-muted-foreground\">show less</span>\n            </div>\n          ) : (\n            <div className=\"flex items-center gap-1\">\n              <ChevronDownIcon size={12} />\n              <span className=\"text-muted-foreground\">\n                show {values.length - maxVisibleValues} more\n              </span>\n            </div>\n          )}\n        </Button>\n      )}\n    </div>\n  );\n};\n","import { ChevronsLeftRightIcon } from \"lucide-react\";\nimport { isValidElement, useState } from \"react\";\nimport { InlineCode } from \"../../components/InlineCode.js\";\nimport type { SchemaObject } from \"../../oas/parser/index.js\";\nimport { cn } from \"../../util/cn.js\";\n\nconst Pattern = ({ pattern }: { pattern: string }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const isExpandable = pattern.length > 20;\n  const shortPattern = isExpandable ? `${pattern.slice(0, 20)}…` : pattern;\n\n  return (\n    <InlineCode\n      className={cn(\"text-xs\", isExpandable && \"cursor-pointer\")}\n      onClick={() => setIsExpanded(!isExpanded)}\n      selectOnClick={false}\n    >\n      {isExpanded ? pattern : shortPattern}\n      {isExpandable && (\n        <button type=\"button\" className=\"p-1 translate-y-[2px]\">\n          {!isExpanded && <ChevronsLeftRightIcon size={12} />}\n        </button>\n      )}\n    </InlineCode>\n  );\n};\n\nconst getSchemaInfos = (schema?: SchemaObject) => {\n  if (!schema) return [];\n\n  const items =\n    schema.type === \"array\" && typeof schema.items === \"object\"\n      ? schema.items\n      : undefined;\n\n  return [\n    items?.type\n      ? Array.isArray(items.type)\n        ? `(${items.type.join(\" | \")})[]`\n        : `${items.type}[]`\n      : Array.isArray(schema.type)\n        ? schema.type.join(\" | \")\n        : schema.type,\n\n    schema.enum && \"enum\",\n    schema.const && \"const\",\n    schema.format,\n    items?.contentMediaType,\n    schema.minimum !== undefined && `min: ${schema.minimum}`,\n    schema.maximum !== undefined && `max: ${schema.maximum}`,\n    schema.minLength !== undefined && `minLength: ${schema.minLength}`,\n    schema.maxLength !== undefined && `maxLength: ${schema.maxLength}`,\n    schema.minItems !== undefined && `minItems: ${schema.minItems}`,\n    schema.maxItems !== undefined && `maxItems: ${schema.maxItems}`,\n    schema.minProperties !== undefined && `minProps: ${schema.minProperties}`,\n    schema.maxProperties !== undefined && `maxProps: ${schema.maxProperties}`,\n    schema.uniqueItems && \"unique\",\n    schema.readOnly && \"readOnly\",\n    schema.writeOnly && \"writeOnly\",\n    schema.deprecated && \"deprecated\",\n    schema.pattern && (\n      <>\n        pattern: <Pattern pattern={schema.pattern} />\n      </>\n    ),\n  ];\n};\n\nexport const ParamInfos = ({\n  schema,\n  extraItems = [],\n  className,\n}: {\n  schema?: SchemaObject;\n  extraItems?: unknown[];\n  className?: string;\n}) => {\n  const filteredItems = [...getSchemaInfos(schema), ...extraItems].flatMap(\n    (item) => (typeof item === \"string\" || isValidElement(item) ? item : []),\n  );\n\n  return (\n    <span className={className}>\n      {filteredItems.map((item, index) => (\n        // biome-ignore lint/suspicious/noArrayIndexKey: index should be stable\n        <span className=\"text-muted-foreground\" key={index}>\n          {item}\n          {index < filteredItems.length - 1 && (\n            <span className=\"text-muted-foreground/50\">\n              &nbsp;&middot;&nbsp;\n            </span>\n          )}\n        </span>\n      ))}\n    </span>\n  );\n};\n","import type { SchemaObject } from \"../../../oas/parser/index.js\";\nimport { SelectOnClick } from \"../components/SelectOnClick.js\";\n\nexport const SchemaExampleAndDefault = ({\n  schema,\n}: {\n  schema: SchemaObject;\n}) => {\n  const example = schema.examples?.at(0);\n  const defaultValue = schema.default;\n\n  if (example === undefined && defaultValue === undefined) return null;\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      {example !== undefined && (\n        <div>\n          <span className=\"text-muted-foreground\">Example: </span>\n          <SelectOnClick className=\"border rounded-sm px-1 font-mono\">\n            {typeof example === \"object\" || typeof example === \"boolean\"\n              ? JSON.stringify(example)\n              : example}\n          </SelectOnClick>\n        </div>\n      )}\n      {defaultValue !== undefined && (\n        <div>\n          <span className=\"text-muted-foreground\">Default: </span>\n          <SelectOnClick className=\"border rounded-sm px-1 font-mono\">\n            {typeof defaultValue === \"object\" ||\n            typeof defaultValue === \"boolean\"\n              ? JSON.stringify(defaultValue)\n              : defaultValue}\n          </SelectOnClick>\n        </div>\n      )}\n    </div>\n  );\n};\n","import {\n  CIRCULAR_REF,\n  SCHEMA_REF_PREFIX,\n} from \"../../../oas/graphql/circular.js\";\nimport type {\n  ArraySchemaObject,\n  SchemaObject,\n} from \"../../../oas/parser/index.js\";\n\nexport const isBasicType = (\n  type: unknown,\n): type is \"string\" | \"number\" | \"boolean\" | \"integer\" | \"null\" =>\n  (typeof type === \"string\" &&\n    [\"string\", \"number\", \"boolean\", \"integer\", \"null\"].includes(type)) ||\n  (Array.isArray(type) && type.every(isBasicType));\n\nexport const isArrayType = (value: SchemaObject): value is ArraySchemaObject =>\n  value.type === \"array\" ||\n  // schema.type might be an array of types, so we need to check if \"array\" is one of them\n  (Array.isArray(value.type) && value.type.includes(\"array\"));\n\nexport const isComplexType = (value?: SchemaObject) =>\n  value &&\n  ((value.type === \"object\" &&\n    Object.keys(value.properties ?? {}).length > 0) ||\n    (value.type === \"array\" &&\n      typeof value.items === \"object\" &&\n      (!value.items.type || value.items.type === \"object\")));\n\nexport const isCircularRef = (schema: unknown): schema is string =>\n  typeof schema === \"string\" &&\n  (schema.startsWith(CIRCULAR_REF) || schema.startsWith(SCHEMA_REF_PREFIX));\n\nexport const isArrayCircularRef = (\n  schema: SchemaObject,\n): schema is SchemaObject & { items: SchemaObject } =>\n  isArrayType(schema) && \"items\" in schema && isCircularRef(schema.items);\n\nexport const extractCircularRefInfo = (\n  ref?: string | SchemaObject,\n): string | undefined => {\n  if (typeof ref !== \"string\") return undefined;\n\n  if (ref.startsWith(SCHEMA_REF_PREFIX)) {\n    return ref.slice(SCHEMA_REF_PREFIX.length).split(\"/\").pop();\n  }\n\n  return ref.split(\":\")[1];\n};\n","import * as Collapsible from \"@radix-ui/react-collapsible\";\nimport { MinusIcon, PlusIcon, RefreshCcwDotIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Item, ItemActions, ItemContent, ItemTitle } from \"zudoku/ui/Item.js\";\nimport { InlineCode } from \"../../../components/InlineCode.js\";\nimport { Markdown } from \"../../../components/Markdown.js\";\nimport type { SchemaObject } from \"../../../oas/parser/index.js\";\nimport { Button } from \"../../../ui/Button.js\";\nimport { cn } from \"../../../util/cn.js\";\nimport { ConstValue } from \"../components/ConstValue.js\";\nimport { EnumValues } from \"../components/EnumValues.js\";\nimport { ParamInfos } from \"../ParamInfos.js\";\nimport { SchemaExampleAndDefault } from \"./SchemaExampleAndDefault.js\";\nimport { SchemaView } from \"./SchemaView.js\";\nimport {\n  extractCircularRefInfo,\n  isArrayCircularRef,\n  isArrayType,\n  isCircularRef,\n  isComplexType,\n} from \"./utils.js\";\n\nconst RecursiveIndicator = ({ circularProp }: { circularProp?: string }) => (\n  <InlineCode\n    className=\"inline-flex items-center gap-1.5 text-xs translate-y-0.5\"\n    selectOnClick={false}\n  >\n    <RefreshCcwDotIcon size={13} />\n    <span>{circularProp ? `${circularProp} (circular)` : \"circular\"}</span>\n  </InlineCode>\n);\n\nexport const SchemaPropertyItem = ({\n  name,\n  schema,\n  group,\n  defaultOpen = false,\n  showCollapseButton = true,\n}: {\n  name: string;\n  schema: SchemaObject;\n  group: \"required\" | \"optional\" | \"deprecated\";\n  defaultOpen?: boolean;\n  showCollapseButton?: boolean;\n}) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen);\n\n  if (isCircularRef(schema)) {\n    return (\n      <Item>\n        <ItemContent className=\"gap-y-2\">\n          <div>\n            <ItemTitle className=\"inline me-2\">\n              <code>{name}</code>\n            </ItemTitle>\n            {\"\\u200B\"}\n            <ParamInfos\n              className=\"inline\"\n              schema={schema}\n              extraItems={[\n                group !== \"optional\" && (\n                  <span className=\"text-primary\">required</span>\n                ),\n                <RecursiveIndicator key=\"circular-ref\" />,\n              ]}\n            />\n          </div>\n          <SchemaExampleAndDefault schema={schema} />\n        </ItemContent>\n      </Item>\n    );\n  }\n\n  const isCollapsible = Boolean(\n    (schema.allOf ||\n      schema.anyOf ||\n      schema.oneOf ||\n      isComplexType(schema) ||\n      (isArrayType(schema) &&\n        \"items\" in schema &&\n        isComplexType(schema.items)) ||\n      schema.additionalProperties) &&\n      !isArrayCircularRef(schema),\n  );\n\n  const shouldRenderDescription = Boolean(\n    schema.description ||\n      (\"items\" in schema && schema.items?.enum) ||\n      schema.const ||\n      schema.enum ||\n      schema.example !== undefined ||\n      schema.default !== undefined,\n  );\n\n  return (\n    <Item>\n      <ItemContent className=\"gap-y-2\">\n        <div>\n          <ItemTitle className=\"inline me-2\">\n            {isCollapsible ? (\n              <button\n                onClick={() => setIsOpen(!isOpen)}\n                type=\"button\"\n                className=\"hover:underline\"\n              >\n                <code>{name}</code>\n              </button>\n            ) : (\n              <code>{name}</code>\n            )}\n          </ItemTitle>\n          {\"\\u200B\"}\n          <ParamInfos\n            className=\"inline\"\n            schema={schema}\n            extraItems={[\n              group !== \"optional\" && (\n                <span className=\"text-primary\">required</span>\n              ),\n              isArrayCircularRef(schema) && (\n                <RecursiveIndicator\n                  circularProp={extractCircularRefInfo(schema.items)}\n                />\n              ),\n            ]}\n          />\n        </div>\n        {shouldRenderDescription && (\n          <div className=\"flex flex-col gap-1.5\">\n            {schema.description && (\n              <Markdown className=\"prose-sm\" content={schema.description} />\n            )}\n            {\"items\" in schema && schema.items?.enum && (\n              <EnumValues values={schema.items.enum} />\n            )}\n            {schema.const && <ConstValue schema={schema} hideDescription />}\n            {schema.enum && <EnumValues values={schema.enum} />}\n            <SchemaExampleAndDefault schema={schema} />\n          </div>\n        )}\n      </ItemContent>\n\n      {isCollapsible && showCollapseButton && (\n        <ItemActions className=\"self-start\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"rounded-full\"\n            onClick={() => setIsOpen(!isOpen)}\n            aria-label=\"Toggle properties\"\n          >\n            {isOpen ? <MinusIcon size={16} /> : <PlusIcon size={16} />}\n          </Button>\n        </ItemActions>\n      )}\n\n      {isCollapsible && (\n        <Collapsible.Root\n          defaultOpen={defaultOpen}\n          open={isOpen}\n          onOpenChange={setIsOpen}\n          className={cn(\"w-full\", !isOpen && \"contents\")}\n        >\n          <Collapsible.Content asChild>\n            <ItemContent>\n              {schema.anyOf || schema.oneOf || schema.type === \"object\" ? (\n                <SchemaView schema={schema} />\n              ) : isArrayType(schema) && \"items\" in schema ? (\n                <SchemaView schema={schema.items} />\n              ) : null}\n            </ItemContent>\n          </Collapsible.Content>\n        </Collapsible.Root>\n      )}\n    </Item>\n  );\n};\n","import type { SchemaObject } from \"../../../oas/parser/index.js\";\n\nexport type FieldSignature = {\n  type?: SchemaObject[\"type\"];\n  const?: unknown;\n  enum?: unknown[];\n  format?: string;\n  pattern?: string;\n  minimum?: number;\n  maximum?: number;\n  exclusiveMinimum?: boolean | number;\n  exclusiveMaximum?: boolean | number;\n  minLength?: number;\n  maxLength?: number;\n  minItems?: number;\n  maxItems?: number;\n  itemsType?: string | string[];\n  additionalProps?: \"true\" | \"false\" | \"schema\";\n};\n\nexport type FieldDoc = {\n  name: string;\n  humanType: string;\n  description?: string;\n  requiredInAll: boolean;\n};\n\nexport const unionVariants = (schema: SchemaObject): SchemaObject[] => {\n  const variants = (schema.oneOf ?? schema.anyOf ?? []) as SchemaObject[];\n\n  // If parent schema has properties that variants don't, merge them\n  // This handles the pattern where anyOf/oneOf is used just for required field combinations\n  if (schema.properties && Object.keys(schema.properties).length > 0) {\n    return variants.map((variant) => {\n      // If variant doesn't define its own properties or type, inherit from parent\n      const shouldInherit =\n        !variant.properties &&\n        !variant.type &&\n        !variant.oneOf &&\n        !variant.anyOf;\n\n      if (shouldInherit) {\n        return {\n          ...variant,\n          type: \"object\" as const,\n          properties: schema.properties,\n          required: variant.required ?? schema.required,\n        };\n      }\n\n      return variant;\n    });\n  }\n\n  return variants;\n};\n\nexport const decideExclusivity = (\n  schema: SchemaObject,\n): \"exactly-one\" | \"at-least-one\" => {\n  if (Array.isArray(schema.oneOf)) return \"exactly-one\";\n\n  const discriminator = schema.discriminator?.propertyName;\n  if (!discriminator) return \"at-least-one\";\n\n  const variants = unionVariants(schema);\n  const seen = new Set<string>();\n\n  for (const variant of variants) {\n    const prop = variant.properties?.[discriminator];\n\n    const value =\n      prop?.const ??\n      (Array.isArray(prop?.enum) && prop.enum.length === 1\n        ? String(prop.enum[0])\n        : undefined);\n\n    if (value == null || seen.has(String(value))) return \"at-least-one\";\n    seen.add(String(value));\n  }\n\n  return \"exactly-one\";\n};\n\nexport const labelForVariant = (index: number, variant: SchemaObject) =>\n  variant.title?.trim() || `Variant ${index + 1}`;\n\nexport const quickGuards = (variant: SchemaObject, root?: SchemaObject) => {\n  const guards: string[] = [];\n\n  if (variant.type) {\n    guards.push(\n      `type = ${Array.isArray(variant.type) ? variant.type.join(\"|\") : variant.type}`,\n    );\n  }\n\n  const discriminator = root?.discriminator?.propertyName;\n  if (discriminator) {\n    const discriminatorProp = variant.properties?.[discriminator] as\n      | SchemaObject\n      | undefined;\n\n    const discriminatorValue =\n      discriminatorProp?.const ??\n      (Array.isArray(discriminatorProp?.enum) &&\n      discriminatorProp.enum.length === 1\n        ? discriminatorProp.enum[0]\n        : undefined);\n\n    if (discriminatorValue !== undefined) {\n      guards.push(`${discriminator}=${JSON.stringify(discriminatorValue)}`);\n    }\n  }\n\n  const required = (variant.required ?? []).filter((k) => k !== discriminator);\n  if (required.length) {\n    const head = required.slice(0, 3).join(\", \");\n    const more = required.length > 3 ? ` +${required.length - 3} more` : \"\";\n    guards.push(`requires: ${head}${more}`);\n  }\n\n  return guards;\n};\n","import { useState } from \"react\";\nimport type { SchemaObject } from \"../../../oas/parser/index.js\";\nimport { Badge } from \"../../../ui/Badge.js\";\nimport { Frame, FramePanel } from \"../../../ui/Frame.js\";\nimport { cn } from \"../../../util/cn.js\";\nimport { SchemaView } from \"./SchemaView.js\";\nimport {\n  decideExclusivity,\n  labelForVariant,\n  quickGuards,\n  unionVariants,\n} from \"./union-helpers.js\";\n\nconst DecisionTable = ({\n  variants,\n  schema,\n  selectedVariant,\n  onSelectVariant,\n}: {\n  variants: SchemaObject[];\n  schema: SchemaObject;\n  selectedVariant: string;\n  onSelectVariant: (label: string) => void;\n}) => {\n  const rows = variants.map((v, i) => ({\n    label: labelForVariant(i, v),\n    guards: quickGuards(v, schema),\n  }));\n\n  return (\n    <div className=\"flex flex-col gap-2 text-sm\">\n      <h4 className=\"font-medium\">Decision Table</h4>\n      <div className=\"border rounded-md overflow-hidden\">\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"border-b bg-muted/50\">\n              <th className=\"text-left p-2 font-medium\">Variant</th>\n              <th className=\"text-left p-2 font-medium\">Matching Criteria</th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y\">\n            {rows.map((row) => (\n              <tr key={row.label} className=\"hover:bg-muted/30\">\n                <td className=\"p-2 font-medium\">\n                  <button\n                    type=\"button\"\n                    className={cn(\n                      \"hover:underline\",\n                      selectedVariant === row.label && \"text-primary\",\n                    )}\n                    onClick={() => onSelectVariant(row.label)}\n                  >\n                    {row.label}\n                  </button>\n                </td>\n                <td className=\"p-2 text-muted-foreground text-xs\">\n                  {row.guards.length > 0\n                    ? row.guards.join(\" · \")\n                    : \"No specific criteria\"}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport const UnionView = ({\n  schema,\n  cardHeader,\n}: {\n  schema: SchemaObject;\n  cardHeader?: React.ReactNode;\n}) => {\n  const mode = Array.isArray(schema.oneOf)\n    ? \"oneOf\"\n    : Array.isArray(schema.anyOf)\n      ? \"anyOf\"\n      : undefined;\n\n  const variants = mode ? unionVariants(schema) : [];\n  const [selectedVariant, setSelectedVariant] = useState(() =>\n    variants[0] ? labelForVariant(0, variants[0]) : \"\",\n  );\n\n  if (!mode) return null;\n\n  const exclusivity = decideExclusivity(schema);\n\n  const semanticsMessage =\n    exclusivity === \"exactly-one\" ? (\n      <>\n        Exactly one variant <b>must match</b>.\n      </>\n    ) : (\n      <>\n        At least one variant <b>must match</b>. Multiple variants{\" \"}\n        <i>may match</i> simultaneously.\n      </>\n    );\n\n  const currentVariantIndex = variants.findIndex(\n    (v, i) => labelForVariant(i, v) === selectedVariant,\n  );\n  const currentVariant =\n    currentVariantIndex >= 0 ? variants[currentVariantIndex] : null;\n\n  return (\n    <Frame>\n      {cardHeader}\n      <FramePanel className=\"text-sm flex flex-col gap-4\">\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"outline\">{mode}</Badge>\n          <div className=\"flex-1 p-2\">\n            <span className=\"text-sm\">{semanticsMessage}</span>\n          </div>\n        </div>\n\n        <DecisionTable\n          variants={variants}\n          schema={schema}\n          selectedVariant={selectedVariant}\n          onSelectVariant={setSelectedVariant}\n        />\n        <strong>Properties for {selectedVariant}:</strong>\n        {currentVariant && <SchemaView schema={currentVariant} />}\n      </FramePanel>\n    </Frame>\n  );\n};\n","import { InfoIcon } from \"lucide-react\";\nimport { Fragment } from \"react\";\nimport {\n  Frame,\n  FrameDescription,\n  FrameFooter,\n  FrameHeader,\n  FramePanel,\n} from \"zudoku/ui/Frame.js\";\nimport { ItemGroup, ItemSeparator } from \"zudoku/ui/Item.js\";\nimport { Markdown } from \"../../../components/Markdown.js\";\nimport type { SchemaObject } from \"../../../oas/parser/index.js\";\nimport { groupBy } from \"../../../util/groupBy.js\";\nimport { ConstValue } from \"../components/ConstValue.js\";\nimport { EnumValues } from \"../components/EnumValues.js\";\nimport { ParamInfos } from \"../ParamInfos.js\";\nimport { SchemaExampleAndDefault } from \"./SchemaExampleAndDefault.js\";\nimport { SchemaPropertyItem } from \"./SchemaPropertyItem.js\";\nimport { UnionView } from \"./UnionView.js\";\nimport { isArrayType, isBasicType } from \"./utils.js\";\n\nconst renderMarkdown = (content?: string) =>\n  content && (\n    <Markdown\n      className=\"text-sm leading-normal line-clamp-4\"\n      content={content}\n    />\n  );\n\nconst renderBasicSchema = (\n  schema: SchemaObject,\n  cardHeader?: React.ReactNode,\n  embedded?: boolean,\n) => {\n  const content = (\n    <>\n      <span className=\"text-sm text-muted-foreground\">\n        <ParamInfos schema={schema} />\n      </span>\n      {schema.enum && <EnumValues values={schema.enum} />}\n      {renderMarkdown(schema.description)}\n      <SchemaExampleAndDefault schema={schema} />\n    </>\n  );\n\n  if (embedded) {\n    return <div className=\"space-y-2 p-4\">{content}</div>;\n  }\n\n  return (\n    <Frame>\n      {cardHeader}\n      <FramePanel className=\"space-y-2\">{content}</FramePanel>\n    </Frame>\n  );\n};\n\nexport const SchemaView = ({\n  schema,\n  defaultOpen = false,\n  cardHeader,\n  embedded,\n}: {\n  schema?: SchemaObject | null;\n  defaultOpen?: boolean;\n  cardHeader?: React.ReactNode;\n  embedded?: boolean;\n}) => {\n  if (!schema || Object.keys(schema).length === 0) {\n    return (\n      <Frame>\n        {cardHeader}\n        <FramePanel>\n          <div className=\"text-sm text-muted-foreground italic\">\n            No data returned\n          </div>\n        </FramePanel>\n      </Frame>\n    );\n  }\n\n  if (schema.const) {\n    return <ConstValue schema={schema} />;\n  }\n\n  if (Array.isArray(schema.oneOf) || Array.isArray(schema.anyOf)) {\n    return <UnionView schema={schema} cardHeader={cardHeader} />;\n  }\n\n  if (isBasicType(schema.type)) {\n    return renderBasicSchema(schema, cardHeader, embedded);\n  }\n\n  if (isArrayType(schema) && typeof schema.items === \"object\") {\n    const wrappedSchema: SchemaObject = {\n      type: \"object\",\n      properties: { \"\": schema },\n    };\n\n    return (\n      <SchemaView schema={wrappedSchema} cardHeader={cardHeader} defaultOpen />\n    );\n  }\n\n  const additionalObjectProperties = typeof schema.additionalProperties ===\n    \"object\" && <SchemaView schema={schema.additionalProperties} embedded />;\n\n  if (schema.type === \"object\") {\n    const groupedProperties = groupBy(\n      Object.entries(schema.properties ?? {}),\n      ([propertyName, property]) => {\n        return property.deprecated\n          ? \"deprecated\"\n          : schema.required?.includes(propertyName)\n            ? \"required\"\n            : \"optional\";\n      },\n    );\n\n    const groupNames = [\"required\", \"optional\", \"deprecated\"] as const;\n    const groups = groupNames.flatMap((group) => {\n      const properties = groupedProperties[group];\n      return properties ? { group, properties } : [];\n    });\n\n    const itemsList = groups.map(({ group, properties }, index) => (\n      <Fragment key={group}>\n        {index > 0 && <ItemSeparator />}\n        <ItemGroup className=\"overflow-clip\">\n          {properties.map(([name, schema], index) => (\n            <Fragment key={name}>\n              {index > 0 && <ItemSeparator />}\n              <SchemaPropertyItem\n                name={name}\n                schema={schema}\n                group={group}\n                defaultOpen={defaultOpen}\n              />\n            </Fragment>\n          ))}\n        </ItemGroup>\n      </Fragment>\n    ));\n\n    if (embedded) {\n      return itemsList;\n    }\n\n    return (\n      <Frame>\n        {cardHeader}\n        {schema.description && (\n          <FrameHeader>\n            <FrameDescription>{schema.description}</FrameDescription>\n          </FrameHeader>\n        )}\n        {(itemsList.length > 0 || additionalObjectProperties) && (\n          <FramePanel className=\"p-0!\">\n            {itemsList}\n            {additionalObjectProperties}\n          </FramePanel>\n        )}\n        {schema.additionalProperties === true && (\n          <FrameFooter>\n            <a\n              className=\"text-sm flex items-center gap-1 hover:underline\"\n              href=\"https://swagger.io/docs/specification/v3_0/data-models/dictionaries/\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              Additional properties are allowed\n              <InfoIcon size={14} />\n            </a>\n          </FrameFooter>\n        )}\n      </Frame>\n    );\n  }\n};\n"],"names":["PagefindSearchMeta","name","children","groupBy","arr","keySelector","accumulator","val","groupedKey","ConstValue","schema","hideDescription","jsx","SelectOnClick","EnumValues","values","className","maxVisibleValues","isOpen","setIsOpen","useState","shouldCollapse","visibleValues","cn","value","Button","jsxs","ChevronUpIcon","ChevronDownIcon","Pattern","pattern","isExpanded","setIsExpanded","isExpandable","shortPattern","InlineCode","ChevronsLeftRightIcon","getSchemaInfos","items","Fragment","ParamInfos","extraItems","filteredItems","item","isValidElement","index","SchemaExampleAndDefault","example","defaultValue","isBasicType","type","isArrayType","isComplexType","isCircularRef","CIRCULAR_REF","SCHEMA_REF_PREFIX","isArrayCircularRef","extractCircularRefInfo","ref","RecursiveIndicator","circularProp","RefreshCcwDotIcon","SchemaPropertyItem","group","defaultOpen","showCollapseButton","Item","ItemContent","ItemTitle","isCollapsible","shouldRenderDescription","Markdown","ItemActions","MinusIcon","PlusIcon","Collapsible","SchemaView","unionVariants","variants","variant","decideExclusivity","discriminator","seen","prop","labelForVariant","quickGuards","root","guards","discriminatorProp","discriminatorValue","required","k","head","more","DecisionTable","selectedVariant","onSelectVariant","rows","v","i","row","UnionView","cardHeader","mode","setSelectedVariant","semanticsMessage","currentVariantIndex","currentVariant","Frame","FramePanel","Badge","renderMarkdown","content","renderBasicSchema","embedded","wrappedSchema","additionalObjectProperties","groupedProperties","propertyName","property","itemsList","properties","ItemSeparator","ItemGroup","FrameHeader","FrameDescription","FrameFooter","InfoIcon"],"mappings":"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"}