import {
  Mr,
  ns
} from "./chunk-T457C7XC.js";
import {
  ListTree,
  mo
} from "./chunk-R54EFXNU.js";
import {
  ae
} from "./chunk-XTV2HAPF.js";
import {
  require_react
} from "./chunk-S73QDKPN.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/zudoku/lib/Toc-WCmwFkX-.js
var import_react = __toESM(require_react(), 1);
var d = "data-active";
var p = ({
  item: s,
  children: r,
  className: n,
  isActive: a
}) => ae.jsxs("li", { className: mo("truncate", n), title: s.value, children: [
  ae.jsx(
    ns,
    {
      to: `#${s.id}`,
      [d]: s.id,
      className: mo(
        a ? "text-primary" : "hover:text-accent-foreground text-muted-foreground"
      ),
      children: s.value
    }
  ),
  r
] });
var R = ({ entries: s }) => {
  const { activeAnchor: r } = Mr(), n = (0, import_react.useRef)(null), a = (0, import_react.useRef)(false), [u, i] = (0, import_react.useState)({
    top: 0,
    opacity: 0
  });
  return (0, import_react.useEffect)(() => {
    if (!n.current) return;
    const t = n.current.querySelector(
      `[${d}='${r}']`
    );
    if (!t) {
      i({ top: 0, opacity: 0 });
      return;
    }
    const o = n.current.getBoundingClientRect().top, m = t.getBoundingClientRect().top;
    i({
      opacity: 1,
      top: `${m - o}px`
    }), !a.current && requestIdleCallback(() => {
      a.current = true;
    });
  }, [r]), ae.jsxs("aside", { className: "sticky scrollbar top-8 lg:top-(--header-height) h-[calc(100vh-var(--header-height))] pt-(--padding-content-top) pb-(--padding-content-bottom) overflow-y-auto ps-1 text-sm", children: [
    ae.jsxs("div", { className: "flex items-center gap-2 font-medium mb-2", children: [
      ae.jsx(ListTree, { size: 16 }),
      "On this page"
    ] }),
    ae.jsxs("div", { className: "relative ms-2 ps-4", children: [
      ae.jsx("div", { className: "absolute inset-0 end-auto bg-border w-[2px]" }),
      ae.jsx(
        "div",
        {
          className: mo(
            "absolute -start-px -translate-y-1 h-6 w-[4px] rounded-sm bg-primary",
            a.current && "ease-out [transition:top_150ms,opacity_325ms]"
          ),
          style: u
        }
      ),
      ae.jsx(
        "ul",
        {
          ref: n,
          className: "relative font-medium list-none space-y-2",
          children: s.map((t) => ae.jsx(
            p,
            {
              isActive: t.id === r,
              item: t,
              className: "ps-0",
              children: t.children && ae.jsx("ul", { className: "list-none ps-4 pt-2 space-y-2", children: t.children.map((o) => ae.jsx(
                p,
                {
                  item: o,
                  isActive: o.id === r
                },
                o.id
              )) })
            },
            t.id
          ))
        }
      )
    ] })
  ] });
};

export {
  R
};
//# sourceMappingURL=chunk-QZLNBAVW.js.map
